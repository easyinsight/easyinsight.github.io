<?xml version="1.0" ?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" creationComplete="refreshData(); addEventListener(DeleteSolutionEvent.DELETE_SOLUTION, onSolutionDelete); addEventListener(SolutionAdminEvent.SOLUTION_ADMIN, refreshRequest)">
    <mx:Script><![CDATA[
        import com.easyinsight.util.PopUpUtil;

        import mx.collections.ArrayCollection;
        import mx.managers.PopUpManager;

        private function deletedSolution():void {
            refreshData();
        }

        private function onSolutionDelete(event:DeleteSolutionEvent):void {
            solutionService.deleteSolution.send(event.solutionID);
        }

        [Bindable]
        private var solutions:ArrayCollection;

        private function gotSolutions():void {
            this.solutions = solutionService.getSolutions.lastResult as ArrayCollection;
        }

        private function refreshData():void {
            solutionService.getSolutions.send();
        }

        private function refreshRequest(event:SolutionAdminEvent):void {
            solutionService.getSolutions.send();
        }

        private function createSolution():void {
            var window:CreateSolutionWindow = CreateSolutionWindow(PopUpManager.createPopUp(this, CreateSolutionWindow, true));
            window.addEventListener(SolutionAdminEvent.SOLUTION_ADMIN, refreshRequest);
            PopUpUtil.centerPopUp(window);
        }
]]></mx:Script>
    <mx:RemoteObject id="solutionService" destination="solutionService">
        <mx:method name="getSolutions" result="gotSolutions()"/>
        <mx:method name="deleteSolution" result="deletedSolution()"/>
    </mx:RemoteObject>
    <mx:HBox>
        <mx:Button label="Add Solution..." click="createSolution()"/>
        <mx:Button label="Refresh" click="refreshData()"/>        
    </mx:HBox>
    <mx:DataGrid dataProvider="{solutions}" width="100%" height="100%">
        <mx:columns>
            <mx:DataGridColumn dataField="name" headerText="Name"/>
            <mx:DataGridColumn dataField="solutionArchiveName" headerText="Archive" width="120"/>
            <mx:DataGridColumn dataField="solutionTier" headerText="Tier" width="120" itemRenderer="com.easyinsight.solutions.SolutionTierRenderer"/>
            <mx:DataGridColumn dataField="name" width="70" sortable="false" headerText="" itemRenderer="com.easyinsight.solutions.SolutionAdminControls"/>
        </mx:columns>
    </mx:DataGrid>
</mx:VBox>
<?xml version="1.0" ?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" title="New Message" creationComplete="validators = [ messageValidator ]">
    <mx:Script><![CDATA[
import mx.controls.Alert;
import mx.validators.Validator;
import mx.managers.PopUpManager;

        [Bindable]
        [Embed(source="../../../../assets/message.png")]
        public var messageIcon:Class;

        private var validators:Array = [];

        private function post():void {
            var results:Array = Validator.validateAll(validators);
            if (results.length > 0) {
                Alert.show("You must have text in the message to post.");
            } else {
                dispatchEvent(new MessagePostedEvent(messageArea.text));
                PopUpManager.removePopUp(this);
            }
        }

        private function cancel():void {
            PopUpManager.removePopUp(this);
        }
]]></mx:Script>
    <mx:VBox styleName="TitleWindowContents">
        <mx:HBox>
            <mx:VBox height="100%" verticalAlign="middle">
                <mx:Image source="{messageIcon}"/>
            </mx:VBox>
            <mx:Form>
                <mx:FormItem label="Message">
                    <mx:TextArea width="300" height="150" id="messageArea"/>
                </mx:FormItem>
            </mx:Form>
            <mx:HBox width="100%" horizontalAlign="center">
                <mx:Button label="Post" click="post()"/>
                <mx:Button label="Cancel" click="cancel()"/>
            </mx:HBox>
        </mx:HBox>
    </mx:VBox>
    <mx:StringValidator source="{messageArea}" property="text" minLength="1" id="messageValidator"/>
</mx:TitleWindow>
<?xml version="1.0" ?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:account="com.easyinsight.account.*" width="100%" height="100%" creationComplete="onCreationComplete()">
    <mx:VBox width="100%" height="100%" horizontalAlign="center">
        <mx:Box width="100%" horizontalAlign="center" backgroundColor="#848080"
                paddingTop="5"
                paddingBottom="5">
            <mx:Label text="Account Administration" fontSize="20" fontFamily="Tahoma" fontWeight="bold" color="#FFFFFF"/>
        </mx:Box>
        <mx:HBox horizontalGap="20" width="100%">
            <mx:VBox horizontalAlign="center" width="33%">
                <mx:Label text="Account Management" fontFamily="Tahoma" fontWeight="bold" fontSize="14"/>
                <mx:Form width="100%" paddingBottom="0" paddingLeft="0" paddingRight="0" paddingTop="0">
                    <account:AccountType accountInfo="{accountInfo}"/>
                    <account:AccountUsers accountInfo="{accountInfo}"/>
                    <account:AccountState accountInfo="{accountInfo}"/>
                    <account:AccountTrialDate accountInfo="{accountInfo}"/>
                </mx:Form>
                <mx:Button label="View Invoices..." click="invoices()" styleName="grayButton" fontSize="14" width="220"/>
                <mx:Button label="Billing Configuration..." click="navigateToURL(new URLRequest('billing/billing.jsp'), '_self');" styleName="grayButton" fontSize="14" width="220"/>
                <mx:Button label="Cancel Account..." click="cancelPaidAccount()"
                    styleName="grayButton" fontSize="14" width="220"/>
            </mx:VBox>
            <mx:VRule strokeColor="#333333"/>
             <mx:VBox horizontalAlign="center" width="33%">
                <mx:Label text="Account Settings" fontFamily="Tahoma" fontWeight="bold" fontSize="14"/>
                 <mx:Button label="Edit Account Settings..." click="editAccountSettings()" styleName="grayButton" fontSize="14" width="220"/>
                 <mx:Button label="Edit Account Skin..." click="editAccountStyling()" styleName="grayButton" fontSize="14" width="220"/>
                 <mx:Button label="Edit My Skin..." click="editUserStyling()" styleName="grayButton" fontSize="14" width="220"/>
            </mx:VBox>
            <mx:VRule strokeColor="#333333"/>
            <mx:VBox horizontalAlign="center" width="33%">
                <mx:Label text="Account Stats" fontFamily="Tahoma" fontWeight="bold" fontSize="14"/>
                <mx:Form width="100%" paddingBottom="0" paddingLeft="0" paddingRight="0" paddingTop="0">
                    <account:AccountStorage accountInfo="{accountInfo}"/>
                    <account:AccountAPIUse accountInfo="{accountInfo}"/>
                </mx:Form>
            </mx:VBox>
        </mx:HBox>
    </mx:VBox>
    <mx:Script><![CDATA[
        import com.easyinsight.framework.User;
        import com.easyinsight.genredata.AnalyzeEvent;
        import com.easyinsight.preferences.PreferencesWindow;
        import com.easyinsight.skin.ApplicationSkinWindow;
        import com.easyinsight.util.PopUpUtil;

        import mx.managers.PopUpManager;

        [Bindable]
        public var accountInfo:AccountInfo;

        [Bindable]
        private var showUpgrade:Boolean;

        private function editAccountStyling():void {
            var applicationSkinWindow:ApplicationSkinWindow = new ApplicationSkinWindow();
            applicationSkinWindow.skinMode = ApplicationSkinWindow.ACCOUNT_SKIN;
            PopUpManager.addPopUp(applicationSkinWindow, this, true);
            PopUpUtil.centerPopUp(applicationSkinWindow);
        }

        private function editUserStyling():void {
            var applicationSkinWindow:ApplicationSkinWindow = new ApplicationSkinWindow();
            applicationSkinWindow.skinMode = ApplicationSkinWindow.USER_SKIN;
            PopUpManager.addPopUp(applicationSkinWindow, this, true);
            PopUpUtil.centerPopUp(applicationSkinWindow);
        }

        private function setupWizard():void {
            dispatchEvent(new AnalyzeEvent(new AccountSetupWizardSource()));
        }

        private function onCreationComplete():void {
            showUpgrade = User.getInstance().getAccountType() != Account.ENTERPRISE;
        }

        private function cancelPaidAccount():void {
            var window:CancelPaidAccountWindow = new CancelPaidAccountWindow();
            PopUpManager.addPopUp(window, this, true);
            PopUpUtil.centerPopUp(window);
        }

        private function editAccountSettings():void {
            var accountSettingsWindow:AccountSettingsWindow = new AccountSettingsWindow();
            PopUpManager.addPopUp(accountSettingsWindow, this, true);
            PopUpUtil.centerPopUp(accountSettingsWindow);
        }

        private function showPreferences():void {
            var window:PreferencesWindow = new PreferencesWindow();
            PopUpManager.addPopUp(window, this, true);
            PopUpUtil.centerPopUp(window);
        }

        private function invoices():void {
            var window:AccountInvoicing = new AccountInvoicing();
            PopUpManager.addPopUp(window, this, true);
            PopUpUtil.centerPopUp(window);
        }
        ]]></mx:Script>
</mx:VBox>

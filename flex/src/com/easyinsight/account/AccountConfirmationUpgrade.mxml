<?xml version="1.0" encoding="utf-8"?>
<mx:Box xmlns:mx="http://www.adobe.com/2006/mxml" width="100%" height="100%" horizontalAlign="center">
	<mx:Metadata>
		[Event(name="accountCreationConfirmed", type="com.easyinsight.account.AccountCreationConfirmationEvent")]
		[Event(name="previousPage", type="com.easyinsight.account.PreviousPageEvent")]
	</mx:Metadata>
	<mx:Script>
		<![CDATA[
import com.easyinsight.framework.UserTransferObject;
        [Bindable]
        private var accountReviewText:String;
        [Bindable]
        private var accountReviewCost:String;
        [Bindable]
        private var userName:String;
        [Bindable]
        private var fullName:String;
        [Bindable]
        private var email:String;

        private var _user:UserTransferObject;


        public function set user(val:UserTransferObject):void {
            _user = val;
            userName = val.userName;
            fullName = val.name;
            email = val.email;
        }

        private function backToPrevious():void {
            dispatchEvent(new PreviousPageEvent());
        }

        private function confirm():void {
            confirmButton.enabled = false;
            creationBar.visible = true;
            dispatchEvent(new AccountCreationConfirmationEvent());
        }

        public function set account(accountType:int):void {
            switch (accountType) {
                case Account.FREE:
                    this.accountReviewText = "Free";
                    this.accountReviewCost = "Free!";
                    break;
                case Account.INDIVIDUAL:
                    this.accountReviewText = "Individual";
                    this.accountReviewCost = "$10/month after free trial";
                    break;
                case Account.GROUP:
                    this.accountReviewText = "Group";
                    this.accountReviewCost = "$100/month after free trial"
//                case Account.PROFESSIONAL:
//                    this.accountReviewText = "Professional";
//                    this.accountReviewCost = "$1500/month after free trial";
//                    break;
//                case Account.ENTERPRISE:
//                    this.accountReviewText = "Enterprise";
//                    this.accountReviewCost = "Free for current beta";
//                    break;
            }
        }
		]]>
	</mx:Script>
    <mx:VBox id="userProfileBox" verticalGap="0" borderThickness="1" borderColor="#D42525" borderStyle="solid" dropShadowEnabled="true">
        <mx:Box width="100%" height="5" backgroundColor="#D42525" left="0" right="0"/>
        <mx:Box width="100%" backgroundColor="#DBD9AC" horizontalAlign="center">
            <mx:Label text="Please review the information below before confirming account upgrade." fontFamily="Tahoma" fontWeight="bold" fontSize="14"/>
        </mx:Box>
        <mx:Form width="100%" backgroundColor="0xDCDBD0" paddingTop="0" paddingLeft="0" paddingRight="0" paddingBottom="0">
            <mx:FormItem label="Chosen Account Type: " fontFamily="Tahoma" fontWeight="bold">
                <mx:Label text="{accountReviewText}" fontFamily="Lucida Grande" fontWeight="normal"/>
            </mx:FormItem>
            <mx:FormItem label="Cost of Account: " fontFamily="Tahoma" fontWeight="bold">
                <mx:Label text="{accountReviewCost}" fontFamily="Lucida Grande" fontWeight="normal"/>
            </mx:FormItem>
            <mx:FormItem label="" direction="horizontal">
                <mx:Button label="Back to Previous Page" click="backToPrevious()"/>
                <mx:Button label="Confirm and Create the Account!" click="confirm()" id="confirmButton"/>
            </mx:FormItem>
            <mx:FormItem label="Upgrading the account..." id="creationBar" visible="false">
                <mx:ProgressBar indeterminate="true"/>
            </mx:FormItem>
	    </mx:Form>
    </mx:VBox>
</mx:Box>

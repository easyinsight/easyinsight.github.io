<?xml version="1.0" ?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" creationComplete="getGroups()">
    <mx:Script><![CDATA[
import mx.managers.PopUpManager;
import mx.collections.ArrayCollection;
import mx.collections.IHierarchicalCollectionView;
        [Bindable]
        private var groups:ArrayCollection;

        private var keyword:String;

        private function search():void {
            this.keyword = searchText.text.toLowerCase();
            IHierarchicalCollectionView(groupGrid.dataProvider).refresh();
        }

        private function getGroups():void {
            addEventListener(GroupSelectedEvent.GROUP_SELECTED, onGroupSelect);
            groupService.getPublicGroups.send();
        }

        private function onGroupSelect(event:GroupSelectedEvent):void {
            PopUpManager.removePopUp(this);
        }

        private function gotPublicGroups():void {
            this.groups = groupService.getPublicGroups.lastResult as ArrayCollection;
        }
]]></mx:Script>
    <mx:RemoteObject destination="groupService" id="groupService">
		<mx:method name="getPublicGroups" result="gotPublicGroups()"/>
	</mx:RemoteObject>
    <mx:VBox styleName="TitleWindowContents">
        <mx:HBox borderStyle="inset" borderThickness="1" paddingTop="5" paddingBottom="5" paddingLeft="5" paddingRight="5">
            <mx:TextInput id="searchText" keyUp="search()"/>
            <mx:Button toolTip="Search" icon="@Embed(source='../../../../assets/view.png')" id="searchButton"/>
        </mx:HBox>
        <mx:DataGrid dataProvider="{groups}" id="groupGrid" width="100%">
            <mx:columns>
                <mx:DataGridColumn dataField="name" headerText="Name" headerRenderer="com.easyinsight.groups.CustomGroupHeader"
                        width="180"/>
                <mx:DataGridColumn dataField="description" headerText="Description" headerRenderer="com.easyinsight.groups.CustomGroupHeader"
                        itemRenderer="com.easyinsight.groups.GroupDescriptionRenderer" width="300"/>
                <mx:DataGridColumn dataField="groupMembers" headerText="Number of Members" width="160" headerRenderer="com.easyinsight.groups.CustomGroupHeader"/>
                <mx:DataGridColumn dataField="name" width="50" headerText="" itemRenderer="com.easyinsight.groups.GroupDiscoveryControls"/>
            </mx:columns>
        </mx:DataGrid>
        <mx:HBox width="100%" horizontalAlign="center">
            <mx:Button label="Close" click="PopUpManager.removePopUp(this)"/>
        </mx:HBox>
    </mx:VBox>
</mx:TitleWindow>
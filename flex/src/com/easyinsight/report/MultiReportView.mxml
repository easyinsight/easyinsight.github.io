<?xml version="1.0" ?>
<report:MultiScreenView xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:easyinsight="com.easyinsight.*"
                        xmlns:util="com.easyinsight.util.*" xmlns:report="com.easyinsight.report.*" width="100%"
                        height="100%">
    <mx:Script><![CDATA[
        import mx.managers.BrowserManager;
        import mx.utils.URLUtil;
        import com.easyinsight.analysis.AnalysisCloseEvent;

        override protected function commitProperties():void {
            super.commitProperties();
            feedService.getReportsForDataSource.send(_dataSourceID);
        }

        private function gotReports():void {
            var info:MultiReportInfo = feedService.getReportsForDataSource.lastResult as MultiReportInfo;
            this.reports = info.reports;
            var feedFragmentObject:Object = new Object();
            feedFragmentObject.multiReportID = String(info.dataSourceKey);
            var feedFragmentString:String = URLUtil.objectToString(feedFragmentObject);
            BrowserManager.getInstance().setFragment(feedFragmentString);
            BrowserManager.getInstance().setTitle("Easy Insight - Reports");
        }

        private function close():void {
            dispatchEvent(new AnalysisCloseEvent(this));
        }
        ]]></mx:Script>
    <mx:RemoteObject id="feedService" destination="feeds">
        <mx:method name="getReportsForDataSource" result="gotReports()"/>
    </mx:RemoteObject>
</report:MultiScreenView>